pipeline{
    //agent any
agent any

tools{
    maven "Maven 3.8.2"
}

triggers{
    cron('* * * * *')
}

options{
    buildDiscarder(logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '4'))
}

stages{
    stage("CheckoutCode"){
        steps{
            git branch: 'development', credentialsId: 'b66e4d4e-c45f-4c2b-9276-c67b8fc87062', url: 'https://github.com/avmani/maven-web-application.git'
        }
    }
    
    stage("BuildPackage"){
        steps{
         sh "mvn clean package"   
        }
    }
    
    stage("ExecuteSonarQubeReport"){
        steps{
            sh "mvn clean sonar:sonar"
        }
    }
    
    stage("UploadArtifactIntoNexus"){
        steps{
            sh "mvn clean deploy"
        }
    }
}
}
